{% extends "base-extended.html" %}
{% block extendedtitle %}{{object.title}}{% endblock %}

{% load comments %}

{% block extrastyle %}
<style type="text/css">
.comment {
}
.commenttext {
	font-size: smaller;
	padding-left: 2em;
	border-bottom: solid 1px;
}
</style>
{% endblock %}

{% block content %}
<div class="blogentry {% if not object.released %}unreleased{% endif %}">
	<div class="date">{{object.post_date}}</div>
	<h1 class="title">{{object.title}}</h1>

	{{object.contents }}
	{% if object.enclosure_url %}
		<div class="enclosure">
			<h2>Enclosure</h2>
			<p>
				<a href="{{object.enclosure_url}}">
				{% if object.enclosure_thumb %}
					<img src="{{object.enclosure_thumb}}"
						title="{{object.title}} enclosure"
						alt="{{object.title}} enclosure"/>
				{% else %}
					{{object.title}} enclosure
				{% endif %}
				</a>
				({{object.enclosure_type}}, {{object.enclosure_length|filesizeformat}})
			</p>
		</div>
		{% endif %}
</div>

{% get_free_comment_list for blog.post object.id as comment_list %}

<div id="commentContainer">

<h2><a name="comments">Comments</a></h2>

{% for comment in comment_list %}
<div class="comment" id="c{{ comment.id }}">
	<h3><a name="c{{ comment.id }}">{{ comment.person_name }}, at
	{{ comment.submit_date|date:"F j, Y" }} {{ comment.submit_date|date:"P" }},
	said:</a></h3>
	<div class="commenttext">
		{{ comment.comment|escape|urlizetrunc:"40"|linebreaks }}
	</div>
</div>
{% endfor %}

{% if object.comments_allowed %}
<h2>Post a Comment</h2>
<div id="commentform">
{% free_comment_form for blog.post object.id %}
</div>
{% else %} 
	<div class="nocomments">
		New comments are not being accepted for this post.
	</div>
{% endif %}

</div>

{% endblock %}
